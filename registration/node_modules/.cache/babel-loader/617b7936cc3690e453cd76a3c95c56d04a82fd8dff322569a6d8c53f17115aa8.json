{"ast":null,"code":"import _toConsumableArray from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{FaStar}from'react-icons/fa';import{Link,useNavigate}from'react-router-dom';import{useAuthContext}from'../hooks/useAuthContext';import{useReviewContext}from'../hooks/useReviewContext';import'./create.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useReviewContext=useReviewContext(),dispatch=_useReviewContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),hover=_useState6[0],setHover=_useState6[1];var name=\"\";var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),emptyFields=_useState8[0],setEmptyFields=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var navigate=useNavigate({});var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var review,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();name=user.firstname;review={post:post,rating:rating,name:name};_context.next=5;return fetch('http://localhost:8000/api/review',{method:'POST',body:JSON.stringify(review),headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:json=_context.sent;if(response.ok){_context.next=14;break;}if(!json.error.includes('E11000')){_context.next=12;break;}return _context.abrupt(\"return\",setErrors(\"User already posted\"));case 12:setErrors(json.error);setEmptyFields(json.emptyFields);case 14:if(response.ok){setPost('');setRating('');navigate('/review');setErrors(null);console.log('new workout created',json);dispatch({type:'CREATE_REVIEW',payload:json});}case 15:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[errors&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errors}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Rating:\"}),_toConsumableArray(Array(5)).map(function(star,index){var currentRating=index+1;return/*#__PURE__*/_jsxs(\"label\",{className:\"starrynight\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:currentRating,onClick:function onClick(){return setRating(currentRating);}}),/*#__PURE__*/_jsx(FaStar,{className:\"star\",size:40,color:currentRating<=(hover||rating)?\"#ffc107\":\"#e4e5e9\",onMouseEnter:function onMouseEnter(){return setHover(currentRating);},onMouseLeave:function onMouseLeave(){return setHover(null);}})]});}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Comment:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"post-post\",value:post,onChange:function onChange(e){return setPost(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",value:name}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\" Submit \"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:'/review',children:\"Cancel\"})})]})]});};export default Create;","map":{"version":3,"names":["React","useEffect","useState","FaStar","Link","useNavigate","useAuthContext","useReviewContext","jsx","_jsx","jsxs","_jsxs","Create","_useReviewContext","dispatch","_useAuthContext","user","_useState","_useState2","_slicedToArray","post","setPost","_useState3","_useState4","rating","setRating","_useState5","_useState6","hover","setHover","name","_useState7","_useState8","emptyFields","setEmptyFields","_useState9","_useState10","errors","setErrors","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","review","response","json","wrap","_callee$","_context","prev","next","preventDefault","firstname","fetch","method","body","JSON","stringify","headers","concat","token","sent","ok","error","includes","abrupt","console","log","type","payload","stop","_x","apply","arguments","children","className","onSubmit","_toConsumableArray","Array","map","star","index","currentRating","value","onClick","size","color","onMouseEnter","onMouseLeave","onChange","target","to"],"sources":["/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/src/components/Create.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {FaStar} from 'react-icons/fa'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { useAuthContext } from '../hooks/useAuthContext'\nimport { useReviewContext } from '../hooks/useReviewContext'\nimport './create.css'\nconst Create = () => {\n    const {dispatch} = useReviewContext()\n    const {user} = useAuthContext()\n    const [post, setPost] = useState(\"\")\n    const [rating, setRating] = useState(\"\")\n    const [hover,setHover] = useState()\n    var name = \"\"\n   \n    const [emptyFields,setEmptyFields]= useState([])\n\n    const [errors, setErrors] = useState([])\n    const navigate = useNavigate({})\n \n    const handleSubmit = async(e) => {\n        e.preventDefault()\n        name = user.firstname\n        const review = {post,rating,name}\n\n        const response = await fetch('http://localhost:8000/api/review',{\n            method: 'POST',\n            body: JSON.stringify(review),\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${user.token}`\n            }\n        })\n        const json = await response.json()\n\n        if(!response.ok){\n            if(json.error.includes('E11000')){\n                return setErrors (\"User already posted\")\n            }\n            setErrors(json.error)\n         \n            setEmptyFields(json.emptyFields)\n        }\n        if(response.ok){\n            setPost('')\n            setRating('')\n           navigate('/review')\n            setErrors(null)\n            console.log('new workout created',json)\n            dispatch({type: 'CREATE_REVIEW', payload: json})\n        }\n    }\n   \n    return (\n        <div>\n\n{errors && (\n <div className=\"error\">{errors}</div>\n                )}\n\n            <form onSubmit={handleSubmit} >\n            <hr />\n            <label>Rating:</label>\n                {[...Array(5)].map((star,index) => {\n                    const currentRating = index +1\n                    return(\n                        <label className='starrynight'>\n                        <input type = \"radio\"\n                        value ={currentRating}\n                        onClick={() =>setRating(currentRating)}/>\n                        <FaStar className='star' size={40}\n                        color={currentRating <= (hover || rating) ? \"#ffc107\":\"#e4e5e9\"}\n                        onMouseEnter={()=> setHover(currentRating)}\n                        onMouseLeave={()=> setHover(null)}/>\n                    </label>\n                    )\n                })}\n               <hr />\n                <label>Comment:</label>\n\n\n                <input type='text' className='post-post' value={post} onChange={(e) => setPost(e.target.value)} />\n\n\n\n                \n\n\n                <input type='hidden' value={name}  />\n                \n\n                <button type=\"submit\"> Submit </button>\n\n               \n                <button><Link to ={'/review'}>Cancel</Link></button>\n            </form>\n           \n        </div>\n    )\n}\nexport default Create"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}