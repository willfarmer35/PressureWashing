{"ast":null,"code":"import _regeneratorRuntime from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useAuthContext}from'./useAuthContext';export var useSignup=function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,firstname,password){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.next=4;return fetch('http://localhost:8000/api/user/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,firstname:firstname,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:json=_context.sent;if(!response.ok){setIsLoading(false);setError(json.error);}if(response.ok){//save to local storage\nlocalStorage.setItem('user',JSON.stringify(json));//update the auth contet\ndispatch({type:'Login',payload:json});setIsLoading(false);}case 10:case\"end\":return _context.stop();}},_callee);}));return function signup(_x,_x2,_x3){return _ref.apply(this,arguments);};}();return{signup:signup,isLoading:isLoading,error:error};};","map":{"version":3,"names":["useState","useAuthContext","useSignup","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isLoading","setIsLoading","_useAuthContext","dispatch","signup","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","firstname","password","response","json","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","ok","localStorage","setItem","type","payload","stop","_x","_x2","_x3","apply","arguments"],"sources":["/Users/willfarmer/Desktop/MERNSTACK/Registration/registration/src/hooks/useSignUp.js"],"sourcesContent":["import {useState} from 'react'\nimport {useAuthContext} from './useAuthContext'\n\nexport const useSignup = () => {\n    const [error,setError] = useState(null)\n    const [isLoading,setIsLoading] = useState(null)\n    const {dispatch} = useAuthContext()\n    const signup = async(email,firstname,password) => {\n        setIsLoading(true)\n        setError(null)\n\n        const response = await fetch('http://localhost:8000/api/user/signup', {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({email,firstname,password})\n        })\n        const json = await response.json()\n\n        if(!response.ok) {\n            setIsLoading(false)\n            setError(json.error)\n        }\n        if(response.ok){\n            //save to local storage\n            localStorage.setItem('user', JSON.stringify(json))\n            \n            //update the auth contet\n            dispatch({type:'Login',payload: json})\n            \n            setIsLoading(false)\n        }\n        \n    }\n    return {signup,isLoading, error}\n    \n}\n"],"mappings":"ycAAA,OAAQA,QAAQ,KAAO,OAAO,CAC9B,OAAQC,cAAc,KAAO,kBAAkB,CAE/C,MAAO,IAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC3B,IAAAC,SAAA,CAAyBH,QAAQ,CAAC,IAAI,CAAC,CAAAI,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,KAAK,CAAAF,UAAA,IAACG,QAAQ,CAAAH,UAAA,IACrB,IAAAI,UAAA,CAAiCR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAxCE,SAAS,CAAAD,UAAA,IAACE,YAAY,CAAAF,UAAA,IAC7B,IAAAG,eAAA,CAAmBX,cAAc,CAAC,CAAC,CAA5BY,QAAQ,CAAAD,eAAA,CAARC,QAAQ,CACf,GAAM,CAAAC,MAAM,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAMC,KAAK,CAACC,SAAS,CAACC,QAAQ,MAAAC,QAAA,CAAAC,IAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACzClB,YAAY,CAAC,IAAI,CAAC,CAClBJ,QAAQ,CAAC,IAAI,CAAC,CAAAoB,QAAA,CAAAE,IAAA,SAES,CAAAC,KAAK,CAAC,uCAAuC,CAAE,CAClEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAC7CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACf,KAAK,CAALA,KAAK,CAACC,SAAS,CAATA,SAAS,CAACC,QAAQ,CAARA,QAAQ,CAAC,CACnD,CAAC,CAAC,QAJIC,QAAQ,CAAAI,QAAA,CAAAS,IAAA,CAAAT,QAAA,CAAAE,IAAA,SAKK,CAAAN,QAAQ,CAACC,IAAI,CAAC,CAAC,QAA5BA,IAAI,CAAAG,QAAA,CAAAS,IAAA,CAEV,GAAG,CAACb,QAAQ,CAACc,EAAE,CAAE,CACb1B,YAAY,CAAC,KAAK,CAAC,CACnBJ,QAAQ,CAACiB,IAAI,CAAClB,KAAK,CAAC,CACxB,CACA,GAAGiB,QAAQ,CAACc,EAAE,CAAC,CACX;AACAC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEL,IAAI,CAACC,SAAS,CAACX,IAAI,CAAC,CAAC,CAElD;AACAX,QAAQ,CAAC,CAAC2B,IAAI,CAAC,OAAO,CAACC,OAAO,CAAEjB,IAAI,CAAC,CAAC,CAEtCb,YAAY,CAAC,KAAK,CAAC,CACvB,CAAC,yBAAAgB,QAAA,CAAAe,IAAA,MAAAvB,OAAA,GAEJ,kBAzBK,CAAAL,MAAMA,CAAA6B,EAAA,CAAAC,GAAA,CAAAC,GAAA,SAAA9B,IAAA,CAAA+B,KAAA,MAAAC,SAAA,OAyBX,CACD,MAAO,CAACjC,MAAM,CAANA,MAAM,CAACJ,SAAS,CAATA,SAAS,CAAEJ,KAAK,CAALA,KAAK,CAAC,CAEpC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}